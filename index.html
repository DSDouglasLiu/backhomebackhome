<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>車流人流退場情報</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
<style>
/* =========== Design Tokens =========== */
:root{
  --radius-xs:6px; --radius-sm:8px; --radius-md:10px; --radius-lg:12px;
  --primary-600:#1f6fe5; --primary-700:#165bd1; --primary-800:#1249ad;
  --success-600:#22c55e; --success-700:#16a34a; --success-800:#15803d;
  --danger-600:#ef4444; --danger-700:#dc2626; --danger-800:#b91c1c;
  --gray-50:#f8fafc; --gray-100:#f1f5f9; --gray-200:#e5e7eb;
  --gray-300:#cbd5e1; --gray-400:#94a3b8; --gray-500:#64748b;
  --gray-600:#475569; --gray-700:#334155; --gray-800:#1f2937; --gray-900:#0f172a;
  --surface: rgba(255,255,255,.78);
  --page-bg: linear-gradient(135deg,#eef2f3,#dfe9f3);
  --text-strong: var(--gray-900);
  --text: var(--gray-800);
  --text-muted: var(--gray-600);
  --border: rgba(148,163,184,0.35);
  --focus:#93c5fd;
  --fz-display:28px; --lh-display:36px; --fw-display:700;
  --fz-title:18px;   --lh-title:24px;   --fw-title:700;
  --fz-sub:14px;     --lh-sub:20px;     --fw-sub:600;
  --fz-label:14px;   --lh-label:20px;   --fw-label:600;
  --fz-body:14px;    --lh-body:20px;    --fw-body:400;
  --fz-note:12px;    --lh-note:16px;    --fw-note:400;
  --shadow-card:0 8px 24px rgba(0,0,0,.08);
}
body.dark{
  --surface: rgba(15,23,42,.55);
  --page-bg: radial-gradient(circle at 10% 20%,#081528 0%,#020617 90%);
  --text-strong:#e5eaf3; --text:#e2e8f0; --text-muted:#93a3b5;
  --border: rgba(148,163,184,0.25);
  --shadow-card:0 8px 24px rgba(0,0,0,.35);
}

/* =========== Base & Layout =========== */
body{margin:0; min-height:100vh; background:var(--page-bg); color:var(--text);
     font-family:system-ui,-apple-system,"Noto Sans TC","Microsoft JhengHei",sans-serif;}
.wrap{max-width:1080px;margin:0 auto;padding:16px 16px 48px;}
h1{margin:0 0 16px;font-size:var(--fz-display);line-height:var(--lh-display);font-weight:var(--fw-display);color:var(--text-strong);}
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow-card);padding:16px;margin:12px 0;}
.hide{display:none !important;}

/* =========== 頂層三大按鈕 – 不同顏色區隔 =========== */
.main-tabs{display:flex;gap:12px;margin:6px 0 12px;flex-wrap:wrap;}
.main-tab{
  border-radius:var(--radius-lg);padding:10px 24px;font-size:16px;font-weight:700;
  cursor:pointer;min-width:140px;text-align:center;transition:all .2s;
}
.main-tab[data-target="pane-dashboard2"]{background:#1e40af;color:#fff;}   /* 深藍 - 最新狀態 */
.main-tab[data-target="pane-single"]   {background:#ea580c;color:#fff;}   /* 橘色 - 個別情報 */
.main-tab[data-target="pane-punch"]    {background:#16a34a;color:#fff;}   /* 綠色 - 登錄與修改 */
.main-tab:hover{filter:brightness(1.1);}
.main-tab.active{box-shadow:0 4px 12px rgba(0,0,0,.2);transform:translateY(-2px);}

/* =========== 子分頁 5 個按鈕 – 五種顏色膠囊風格 =========== */
.sheet-tabs.dash-tabs{
  display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-start;
}
.sheet-tabs.dash-tabs .btn-tab{
  min-width:140px;padding:10px 16px;font-weight:600;border-radius:999px;
  border:none !important;color:#fff;
}
.dash-tabs .btn-tab[data-key="ALL"]                 {background:#64748b;} /* 灰 */
.dash-tabs .btn-tab[data-key="地區專車退場（遊覽車平台）"] {background:#dc2626;} /* 紅 */
.dash-tabs .btn-tab[data-key="地區專車退場（禪堂平台）"]   {background:#ea580c;} /* 橘 */
.dash-tabs .btn-tab[data-key="水陸專車退場"]           {background:#16a34a;} /* 綠 */
.dash-tabs .btn-tab[data-key="288法青退場"]           {background:#7c3aed;} /* 紫 */
.dash-tabs .btn-tab.active{box-shadow:0 4px 12px rgba(0,0,0,.25);transform:scale(1.05);}

/* 其餘所有原本樣式保持不變（省略數千行） */
.refresh-bar{ display:flex; gap:10px; align-items:center; justify-content:flex-end; margin:4px 0 6px; }
.clock{ font-weight:900; letter-spacing:.5px; font-variant-numeric: tabular-nums; }
.seg-group{ display:flex; gap:8px; flex-wrap:wrap; }
.seg-btn{
  background:#fff; color:var(--primary-600);
  border:1px solid var(--primary-600); border-radius:var(--radius-lg);
  padding:6px 14px; font-size:var(--fz-body); font-weight:700; cursor:pointer; min-width:72px; text-align:center;
}
body.dark .seg-btn{ background:transparent; }
.seg-btn:hover{ background:rgba(31,111,229,.06); }
.seg-btn.active{ background:var(--primary-600); color:#fff; border-color:var(--primary-600); }

/* ...（中間所有原本的 CSS 完全保留）... */

/* 最終統一美化 */
.stat-num,.loc-num{font-size:32px !important;font-weight:900 !important;line-height:1 !important;}
.stat-label,.loc-pill .stat-label{font-size:14px !important;font-weight:800 !important;color:var(--text-strong)!important;margin-top:4px;line-height:1.4 !important;}
.loc-name{font-size:15px;font-weight:700;}
</style>
</head>
<body>
<!-- HTML 結構完全跟你原本一樣，唯一差別是把 dashTabsBar 的 class 加上 dash-tabs -->
<div class="wrap">
  <div class="topbar-grid">
    <div class="left-title"><h1 id="pageTitle">車流人流退場情報</h1></div>
    <div class="right-user">
      <div id="signin"></div>
      <div id="userInfo" class="hide user-info">
        <span id="userDisplay"></span>
        <button id="logoutBtn" class="btn btn--secondary btn--sm">登出</button>
      </div>
    </div>

    <!-- 三大主按鈕 -->
    <div class="left-tabs">
      <div id="mainTabs" class="main-tabs" style="justify-content:space-between;">
        <button class="main-tab active" data-target="pane-dashboard2">最新狀態</button>
        <button class="main-tab" data-target="pane-single">個別情報</button>
        <button class="main-tab" data-target="pane-punch">登錄與修改</button>
      </div>
    </div>

    <div class="right-refresh">
      <div class="refresh-bar">
        <div class="clock" id="clockDisplay">--:--:--</div>
        <div class="seg-group" id="refreshControls"></div>
      </div>
    </div>
  </div>

  <!-- 最新狀態頁面（pane-dashboard2） -->
  <div id="pane-dashboard2" class="tab-pane">
    <div class="card" id="dashTabsBar2" style="padding-bottom:6px;">
      <div class="sheet-tabs dash-tabs" id="dashboardTabs2"></div>
    </div>
    <div id="dashboard2"></div>
  </div>

  <!-- 其他頁面（個別情報、登錄與修改）保持不變 -->
  <div id="pane-single" class="tab-pane hide">...</div>
  <div id="pane-punch" class="tab-pane hide">...</div>
</div>

<script>
// 只需要改這兩行
function finishLoginUI() {
  // ...原本程式...
  switchPane('pane-dashboard2');                      // 預設開最新狀態
  document.querySelectorAll('#mainTabs .main-tab').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.target === 'pane-dashboard2');
  });
}

// 讀取資料時統一顯示「讀取資料...」
async function buildDashboard2(silent = false){
  // ...原本程式...
  if (silent) { await work(); }
  else { await withLoading(work, '讀取資料…'); }     // 改成「讀取資料…」
}

// 個別情報查詢也一樣
function initSinglePage(){
  // ...原本程式...
  withLoading(loadSingleData, '讀取資料…');         // 改成「讀取資料…」
}
</script>
</body>
</html>
